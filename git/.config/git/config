[core]
    editor = nvim
[push]
    autoSetupRemote = true
[includeIf "gitdir:~/.dotfiles/"]
    path = ~/.config/git/config.personal
[includeIf "gitdir:~/personal/"]
    path = ~/.config/git/config.personal
[includeIf "gitdir:~/zesty/"]
    path = ~/.config/git/config.zesty
[init]
    defaultBranch = main
[branch]
    sort = -committerdate    # Sort branches by most recent commit first
[tag]
    sort = -version:refname  # Sort version numbers as you would expect
[alias]
    diff = diff --color
    d = difftool
    url = "!f() { \
       echo \"$(git ls-remote --get-url \
        | sed 's|git@|https://|' \
        | sed 's|.com:|.com/|' \
        | sed 's|\\.git$||'; \
       )\"; \
  }; f"
    stale-branches = "!f() { \
        git for-each-ref --merged=main \
            --sort=authordate refs/remotes/ \
            | awk '{print $3}' \
            | grep -v origin/HEAD \
            | grep -v origin/main; \
    }; f"
    bare-clone = "!f() { \
        [ -n \"$1\" ] || { echo \"usage: git bare-clone <url> [dir]\" >&2; return 1; }; \
        if [ -n \"$2\" ]; then \
            dest=\"$2\"; \
        else \
            dest=\"$(basename -- \"$1\")\"; \
            dest=\"${dest%.git}.git\"; \
        fi; \
        git clone --bare -- \"$1\" \"$dest\" && \
            git --git-dir=\"$dest\" config remote.origin.fetch \"+refs/heads/*:refs/remotes/origin/*\" && \
            git --git-dir=\"$dest\" fetch origin; \
    }; f"
[diff]
    tool = nvimdiff
    algorithm = histogram    # Clearer diffs on moved/edited lines
    colorMoved = plain       # Highlight moved blocks in diffs
    mnemonicPrefix = true    # More intuitive refs in diff output
[difftool]
    prompt = false
[commit]
    verbose = true           # Include diff comment in commit message template
[column]
    ui = auto                # Output in columns when possible
[rerere]
    enabled = true           # Record and reuse conflict resolutions
    autoupdate = true        # Apply stored conflict resolutions automatically
[advice]
    skippedCherryPicks = false
[url "ssh://git@github.com/"]
    insteadOf = https://github.com/
[url "ssh://git@gitlab.com/"]
    insteadOf = https://gitlab.com/
[pager]
    diff = diff-so-fancy | less --tabs=4 -RFXS
[pull]
    rebase = true
